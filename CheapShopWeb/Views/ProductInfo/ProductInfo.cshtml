@using CheapShopWeb.Models
@model List<CheapShopWeb.Models.ProductResponse>
@{
    ViewBag.Title = "ProductInfo";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="container-fluid border border-dark mb-4">
    <div class="row">
        <div class="col-sm-12 col-md-3">
            <img class="img-fluid mx-auto d-block" src=@Model[0].photo_link alt="" />
        </div>
        <div class="col-sm-12 col-md-6 border border-primary">
            <h2>@Model[0].name</h2>
            <p>Grupė: @Model[0].group</p>
            <p>Šaltinis: @Model[0].source</p>
        </div>

        <div class="col-sm-12 col-md-3">
            <h2>@Model[0].price</h2>
            <a href=@Model[0].product_link class="btn btn-primary">Link</a>
        </div>
        <div class="clearfix"></div>
    </div>
</div>
@if(Model.Count>2)
{
<p>Similar products:</p>
    <div class="tableFixHead">
        <table style="width: 100%">
            <colgroup>
                <col span="1" style="width: 70%;">
                <col span="1" style="width: 10%;">
                <col span="1" style="width: 10%;">
                <col span="1" style="width: 10%;">
            </colgroup>
            <thead>
            <tr>
                <th>Name</th>
                <th>Price</th>
                <th>Source</th>
                <th>Link </th>
            </tr>
            </thead>
            <tbody>
            @foreach (var product in Model)
            {

                if (!product.name.Equals(Model[0].name) && !(product.price.Equals(Model[0].price)))
                {

                    <tr>
                        <td>
                            <p>
                                <span>@product.name</span>
                                <img src="@product.photo_link"/>
                            </p>
                        </td>
                        <td>@product.price</td>
                        <td>@product.source</td>
                        <td><a href=@product.product_link class="button">Link</a></td>
                    </tr>
                }


            }
            </tbody>
        </table>
    </div>
}
<style>
    .tableFixHead {
        overflow-y: auto;
        height: 700px;
    }

    .tableFixHead thead th {
        position: sticky;
        top: 0;
    }

    .container-fluid {
        margin-top: 20px;
    }

    tr {
        margin: 2px;
        border-bottom: 1px solid green;
    }

    th {
        border-right: 1px solid black;
    }

    img {
        display: none;
        height: 200px;
        width: 200px;
        -o-object-fit: contain;
    }
    span:hover + img {
        display: block;
    }
</style>
@*<table>
        <tr>
            <th>Name</th>
            <th>Price</th>
            <th>Source</th>
            <th>Link </th>
        </tr>
        @foreach (var product in Model)
        {

            if (!product.name.Equals(Model[0].name) && !(product.price.Equals(Model[0].price)))
            {

                <tr>
                    <td>
                        <p>
                            <span>@product.name</span>
                            <img src="@product.photo_link"/>
                        </p>
                    </td>
                    <td>@product.price</td>
                    <td>@product.source</td>
                    <td><a href=@product.product_link class="button">Link</a></td>
                </tr>
            }


        }
    </table>
*@